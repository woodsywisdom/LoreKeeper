{"version":3,"sources":["store/campaigns.js","store/auth.js","store/configureStore.js","components/utils/Routes.js","components/campaigns/CampaignCard.js","components/campaigns/CampaignsPage.js","components/navbar/Navbar.js","components/welcomepage/WelcomePage.js","App.js","index.js"],"names":["setCampaigns","campaigns","type","setUser","user","storeEnhancer","rootReducer","combineReducers","auth","state","id","action","newState","Object","assign","push","campaign","applyMiddleware","thunk","ProtectedRoute","Component","component","path","currentUserId","exact","history","render","props","to","AuthRoute","CampaignCard","Grid","item","xs","Card","onClick","e","preventDefault","window","location","target","Typography","variant","title","description","CampaignsPage","useSelector","Container","container","map","key","useStyles","makeStyles","toolbar","justifyContent","Navbar","dispatch","useDispatch","classes","AppBar","position","Toolbar","display","className","Box","Button","username","password","a","csrf_token","Cookies","get","fetch","method","headers","body","JSON","stringify","res","json","data","ok","errors","csrfToken","endIcon","IconButton","WelcomePage","App","initialState","console","log","useEffect","setCSRF","loadUser","CssBaseline","store","createStore","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.05ee95b9.chunk.js","sourcesContent":["// import Cookies from 'js-cookie';\n\nconst SET_CAMPAIGNS = 'campaigns/SET_CAMPAIGNS';\nconst ADD_CAMPAIGN = 'campaigns/ADD_CAMPAIGN';\n\n\nexport const setCampaigns = campaigns => {\n  return ({\n    type: SET_CAMPAIGNS,\n    campaigns,\n  });\n}\n\nexport const addCampaign = campaign => {\n  return ({\n    type: ADD_CAMPAIGN,\n    campaign,\n  });\n}\n\nexport default function campaignReducer(state=[], action) {\n  const newState = Object.assign({}, state);\n  switch (action.type) {\n    case SET_CAMPAIGNS:\n      return action.campaigns;\n    case ADD_CAMPAIGN:\n      newState.push(action.campaign);\n      return newState;\n    default:\n      return state;\n  }\n}\n","import Cookies from 'js-cookie';\nimport {setCampaigns} from './campaigns';\n\nconst SET_USER = 'auth/SET_USER';\n\n\nexport const setUser = user => {\n  return ({\n    type: SET_USER,\n    user,\n  });\n}\n\nexport const login = (username, password) => async (dispatch) => {\n  const csrf_token = Cookies.get('XSRF-TOKEN');\n  const res = await fetch('/api/session/login/', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-CSRFTOKEN': csrf_token\n    },\n    body: JSON.stringify({ username, password, 'csrf_token': csrf_token }),\n  });\n  const data = await res.json();\n  // loads campaigns into their own state and\n  const campaigns = data.campaigns;\n  dispatch(setCampaigns(campaigns));\n  delete data.campaigns;\n\n  if (res.ok && !data['errors']) {\n    dispatch(setUser(data));\n    res.data = data;\n  } else {\n    res.errors = data['errors'];\n    // dispatch(registerErrors(data['errors']));\n  }\n  return res\n}\n\nexport const logout = () => async (dispatch) => {\n  const csrfToken = Cookies.get('XSRF-TOKEN');\n  const res = await fetch('/api/session/logout/', {\n    method: 'get',\n    headers: {\n      'Content-Type': 'application/json',\n      'XSRF-TOKEN': csrfToken,\n    },\n  });\n  const data = await res.json();\n  if (res.ok && !data['errors']) {\n    dispatch(setUser({ id: null }));\n    dispatch(setCampaigns([]));\n  } else {\n    res.errors = data['errors'];\n  }\n  return res\n}\n\nexport default function authReducer(state={ id: null }, action) {\n  // const newState = Object.assign({}, state);\n  switch (action.type) {\n    case SET_USER:\n      return action.user;\n    default:\n      return state;\n  }\n}\n","import { createStore, compose, combineReducers, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport auth from './auth';\nimport campaigns from './campaigns';\n\nconst rootReducer = combineReducers({\n  auth,\n  campaigns,\n});\n\nlet storeEnhancer;\n\nif (process.env.NODE_ENV !== 'production') {\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  storeEnhancer = composeEnhancers(applyMiddleware(thunk));\n} else {\n  storeEnhancer = applyMiddleware(thunk);\n}\n\nexport default function configureStore(initialState) {\n  return createStore(\n    rootReducer,\n    initialState,\n    storeEnhancer\n  );\n}\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nexport const ProtectedRoute = ({ component: Component, path, currentUserId, exact, history }) => {\n  return (\n    <Route path={path} exact={exact} render={(props) => (\n      currentUserId ? <Component {...props} /> : <Redirect to='/welcome' />\n    )} />\n  )\n}\n\nexport const AuthRoute = ({ component: Component, path, currentUserId, exact, history }) => {\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={(props) =>\n        currentUserId ? <Redirect to='/users/:userId/campaigns' /> : <Component {...props} />\n      }\n    />\n  );\n};\n","import React from 'react';\n\nimport { Grid, Card, Typography } from '@material-ui/core';\n\n\nconst CampaignCard = (props) => {\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    window.location = `/campaigns/${e.target.id}`\n  }\n\n  return (\n    <>\n      <Grid item xs={4}>\n        <Card onClick={handleClick} id={props.id}>\n          <Typography variant='button'>{props.title}</Typography>\n          <Typography variant='caption'>{props.description}</Typography>\n        </Card>\n      </Grid>\n\n    </>\n  );\n}\n\nexport default CampaignCard;\n","import React, { useEffect } from 'react';\nimport { Container, Grid, Typography } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\n\nimport CampaignCard from './CampaignCard';\n\nconst CampaignsPage = () => {\n\n  const campaigns = useSelector(state => state.campaigns);\n\n  return (\n    <>\n      <Container>\n        <Typography variant='h4'>Your Campaigns</Typography>\n        <Grid container>\n          {campaigns.map(campaign => {\n            return (\n              <CampaignCard\n                key={campaign.id}\n                id={campaign.id}\n                title={campaign.title}\n                description={campaign.description}\n              />\n            );\n          })}\n        </Grid>\n      </Container>\n    </>\n  );\n}\n\nexport default CampaignsPage;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login, logout } from '../../store/auth';\n\nimport { AppBar, Box, IconButton, Toolbar, Button, Typography, } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\n\nconst useStyles = makeStyles({\n  toolbar: {\n    justifyContent: \"space-between\",\n  }\n});\n\nconst Navbar = () => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n    dispatch(login('Ian', 'password'));\n  }\n\n  const handleLogout = (e) => {\n    e.preventDefault();\n    dispatch(logout());\n  }\n\n  return (\n    <>\n      <AppBar position='static' >\n        <Toolbar display='flex' variant=\"dense\" className={classes.toolbar} >\n          <Box>\n            <Typography variant='button'>LoreKeeper</Typography>\n          </Box>\n          <Box>\n            <Button onClick={handleLogin}>Login</Button>\n            <Button onClick={handleLogout}>Logout</Button>\n            <Button endIcon={<ExpandMoreIcon />}>Campaigns</Button>\n            <IconButton>\n              <AccountCircle />\n            </IconButton>\n          </Box>\n        </Toolbar>\n      </AppBar>\n    </>\n  );\n};\n\nexport default Navbar;\n","import React from 'react';\n\n\nconst WelcomePage = () => {\n\n  return (\n    <>\n      <h1>Welcome Page</h1>\n    </>\n  );\n};\n\nexport default WelcomePage;\n","import React, { useEffect } from 'react';\nimport { BrowserRouter, Switch, Route, NavLink } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ProtectedRoute, AuthRoute } from './components/utils/Routes';\nimport CampaignsPage from './components/campaigns/CampaignsPage';\n\nimport { CssBaseline } from '@material-ui/core';\nimport Navbar from './components/navbar/Navbar';\nimport WelcomePage from './components/welcomepage/WelcomePage';\nimport { setUser } from './store/auth';\nimport { setCampaigns } from './store/campaigns';\n\n\nfunction App() {\n    console.log(\"____Rendering app_____\");\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const setCSRF = async () => {\n            const res = await fetch('/api/session/csrf/');\n            if (res.ok) {\n                return;\n            }\n        }\n        setCSRF();\n    }, []);\n\n    useEffect(() => {\n        const loadUser = async () => {\n            const res = await fetch('/api/session/current-user/');\n            if (res.ok) {\n                const user = await res.json()\n                const campaigns = user.campaigns;\n                dispatch(setCampaigns(campaigns));\n                delete user.campaigns;\n                dispatch(setUser(user));\n            }\n        }\n        loadUser();\n    }, []);\n\n    const currentUserId = useSelector(state => state.auth.id)\n    return (\n        <>\n            <CssBaseline />\n            <BrowserRouter>\n                <Navbar />\n                <Switch>\n                    <ProtectedRoute path='/users/:userId/campaigns' exact component={CampaignsPage} currentUserId={currentUserId} />\n                    <AuthRoute path='/welcome' exact component={WelcomePage} currentUserId={currentUserId} />\n                    <AuthRoute path='/' exact component={WelcomePage} currentUserId={currentUserId} />\n                </Switch>\n            </BrowserRouter>\n        </>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport configureStore from './store/configureStore';\nimport './index.css';\nimport App from './App';\n\nconst store = configureStore();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}