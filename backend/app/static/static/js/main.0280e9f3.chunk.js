(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),u=a.n(c),l=a(18),i=a(35),o=a(72),s=a(16),p=a.n(s),m=a(29),f=a(40),d=a.n(f),E=a(79),g=function(e){return{type:"campaigns/SET_CAMPAIGNS",campaigns:e}},h=function(e){return{type:"campaigns/ADD_CAMPAIGN",campaign:e}};var v=function(e){return{type:"auth/SET_USER",user:e}};var b,j=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER":return t.user;default:return e}},campaigns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=Object(E.a)(e);switch(t.type){case"campaigns/SET_CAMPAIGNS":return t.campaigns;case"campaigns/ADD_CAMPAIGN":return a.push(t.campaign),a;default:return e}}});b=Object(i.a)(o.a);a(101);var O=a(49),C=a(146),x=a(131),y=a(133),w=a(148),k=a(46),S=a(134),N=a(135),_=a(129),I=a(76),T=a.n(I),D=a(77),F=a.n(D),A=Object(_.a)({toolbar:{justifyContent:"space-between"}}),R=function(){var e=Object(l.b)(),t=A();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{position:"static"},r.a.createElement(y.a,{display:"flex",variant:"dense",className:t.toolbar},r.a.createElement(w.a,{onClick:function(e){e.preventDefault(),window.location="/"}},r.a.createElement(k.a,{variant:"button"},"LoreKeeper")),r.a.createElement(w.a,null,r.a.createElement(S.a,{onClick:function(t){var a,n;t.preventDefault(),e((a="Ian",n="password",function(){var e=Object(m.a)(p.a.mark((function e(t){var r,c,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.a.get("XSRF-TOKEN"),e.next=3,fetch("/api/session/login/",{method:"post",headers:{"Content-Type":"application/json","X-CSRFTOKEN":r},body:JSON.stringify({username:a,password:n,csrf_token:r})});case 3:return c=e.sent,e.next=6,c.json();case 6:return u=e.sent,l=u.campaigns,t(g(l)),delete u.campaigns,c.ok&&!u.errors?(t(v(u)),c.data=u):c.errors=u.errors,e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},"Login"),r.a.createElement(S.a,{onClick:function(t){t.preventDefault(),e(function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.a.get("XSRF-TOKEN"),e.next=3,fetch("/api/session/logout/",{method:"get",headers:{"Content-Type":"application/json","XSRF-TOKEN":a}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,n.ok&&!r.errors?(t(v({id:null})),t(g([]))):n.errors=r.errors,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"Logout"),r.a.createElement(S.a,{endIcon:r.a.createElement(T.a,null)},"Campaigns"),r.a.createElement(N.a,null,r.a.createElement(F.a,null))))))},K=a(12),U=function(e){var t=e.component,a=e.path,n=e.currentUserId,c=e.exact;e.history;return r.a.createElement(K.b,{path:a,exact:c,render:function(e){return n?r.a.createElement(t,e):r.a.createElement(K.a,{to:"/welcome"})}})},X=function(e){var t=e.component,a=e.path,n=e.currentUserId,c=e.exact;e.history;return r.a.createElement(K.b,{path:a,exact:c,render:function(e){return n?r.a.createElement(K.a,{to:"/users/:userId/campaigns"}):r.a.createElement(t,e)}})},M=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Welcome Page"))},P=a(45),G=a(150),J=a(144),L=a(136),W=a(137),H=a(138),B=a(139),Y=a(140),q=a(145),z=a(78),Q=a.n(z),V=Object(_.a)({campaignCard:{cursor:"pointer",height:"180px"}}),Z=function(e){var t=V();return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{item:!0,xs:4},r.a.createElement(W.a,{onClick:function(e){e.preventDefault(),window.location="/campaigns/".concat(e.target.id)},id:e.id,className:t.campaignCard},r.a.createElement(H.a,null,r.a.createElement(B.a,null,r.a.createElement(Y.a,null,r.a.createElement(k.a,{variant:"button"},e.title))),r.a.createElement(B.a,null,r.a.createElement(Y.a,null,r.a.createElement(k.a,{variant:"caption"},e.description)))))))},$=a(141),ee=a(142),te=a(147),ae=a(143),ne=function(){var e=Object(l.b)(),t=(Object(l.c)((function(e){return e.auth.id})),Object(n.useState)("")),a=Object(P.a)(t,2),c=a[0],u=a[1],i=Object(n.useState)(""),o=Object(P.a)(i,2),s=o[0],f=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,"Create a new Campaign"),r.a.createElement(ee.a,null,r.a.createElement(te.a,{autoFocus:!0,id:"title",lable:"Title",placeholder:"The title of your campaign (<50 characters)",fullWidth:!0,onChange:function(e){e.preventDefault(),u(e.target.value)}}),r.a.createElement(te.a,{id:"Description",lable:"Description",placeholder:"A brief description of your campaign",fullWidth:!0,multiline:!0,onChange:function(e){e.preventDefault(),f(e.target.value)}}),r.a.createElement(ae.a,null,r.a.createElement(S.a,{onClick:function(t){t.preventDefault(),e(function(e,t,a){return function(){var a=Object(m.a)(p.a.mark((function a(n){var r,c,u,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=d.a.get("XSRF-TOKEN"),a.next=3,fetch("/api/campaigns/",{method:"post",headers:{"Content-Type":"application/json","X-CSRFTOKEN":r},body:JSON.stringify({title:e,description:t,csrf_token:r})});case 3:return c=a.sent,u=c.json(),l=u.campaign,c.ok&&!u.errors?n(h(l)):c.errors=u.errors,a.abrupt("return",c);case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c,s))},color:"primary"},"Add Campaign"))))},re=Object(_.a)({yourCampaignsHeader:{padding:"40px 0px"},addCard:{cursor:"pointer",height:"180px"}}),ce=function(){var e=Object(l.c)((function(e){return e.campaigns})),t=re(),a=Object(n.useState)(!1),c=Object(P.a)(a,2),u=c[0],i=c[1],o=function(e){e.preventDefault(),i(!u)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{open:u,onClose:o},r.a.createElement(ne,null)),r.a.createElement(J.a,null,r.a.createElement(k.a,{className:t.yourCampaignsHeader,variant:"h4"},"Your Campaigns"),r.a.createElement(L.a,{container:!0,spacing:3},e.map((function(e){return r.a.createElement(Z,{key:e.id,id:e.id,title:e.title,description:e.description})})),r.a.createElement(L.a,{item:!0,xs:4},r.a.createElement(W.a,{onClick:o,className:t.addCard},r.a.createElement(H.a,null,r.a.createElement(B.a,null,r.a.createElement(Y.a,null,r.a.createElement(k.a,{variant:"button"},"Create New Campaign"))),r.a.createElement(B.a,null,r.a.createElement(q.a,null,r.a.createElement(Q.a,null)))))))))},ue=function(e){var t=e.userId;return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.d,null,r.a.createElement(U,{path:"/users/:userId/campaigns",exact:!0,component:ce,currentUserId:t}),r.a.createElement(X,{path:"/welcome",exact:!0,component:M,currentUserId:t}),r.a.createElement(X,{path:"/",exact:!0,component:M,currentUserId:t})))};var le,ie=function(){console.log("____Rendering app_____");var e=Object(l.b)();Object(n.useEffect)((function(){(function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/session/csrf/");case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[e]),Object(n.useEffect)((function(){(function(){var t=Object(m.a)(p.a.mark((function t(){var a,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/session/current-user/");case 2:if(!(a=t.sent).ok){t.next=11;break}return t.next=6,a.json();case 6:n=t.sent,r=n.campaigns,e(g(r)),delete n.campaigns,e(v(n));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]);var t=Object(l.c)((function(e){return e.auth.id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null),r.a.createElement(O.a,null,r.a.createElement(R,null),r.a.createElement(ue,{userId:t})))},oe=Object(i.d)(j,le,b);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:oe},r.a.createElement(ie,null))),document.getElementById("root"))},91:function(e,t,a){e.exports=a(104)}},[[91,1,2]]]);
//# sourceMappingURL=main.0280e9f3.chunk.js.map